package io.github.confuser2188.exploitguard;

import org.bukkit.command.CommandExecutor;
import org.bukkit.command.CommandSender;

public class Command implements CommandExecutor {

    public boolean onCommand(CommandSender sender, org.bukkit.command.Command cmd, String label, String[] args) {
        if(cmd.getName().equalsIgnoreCase("exploitguard"))
        {
            String prefix = Main.applyColor(Main.plugin.getConfig().getString("prefix"));

            if(!sender.hasPermission("exploitguard.reload"))
                sender.sendMessage(prefix + Main.applyColor(Main.plugin.getConfig().getString("noperm_message")));
            else{
                if(args.length == 0)
                    sendAvailableCommands(prefix, sender);
                else{
                    switch(args[0])
                    {
                        case "reload":
                            Main.plugin.reloadConfig();
                            sender.sendMessage(prefix + Main.applyColor(Main.plugin.getConfig().getString("reload_message")));
                            break;
                        case "version":
                            sender.sendMessage(prefix + "Current version: §c" + Main.plugin.getDescription().getVersion());
                            sender.sendMessage(prefix + "Made by §cConfuser2188");
                            break;
                        default:
                            sendAvailableCommands(prefix, sender);
                            break;
                    }
                }
            }
        }
        return false;
    }

    private void sendAvailableCommands(String prefix, CommandSender sender) {
        sender.sendMessage(prefix + "Available commands:");
        sender.sendMessage(prefix + "/eg reload");
        sender.sendMessage(prefix + "/eg version");
    }
}
