package io.github.confuser2188.exploitguard.module.check;

import io.github.confuser2188.exploitguard.Main;
import io.github.confuser2188.exploitguard.module.Check;
import io.github.confuser2188.exploitguard.module.Module;
import io.github.confuser2188.packetlistener.event.ReceivedPacketEvent;
import org.bukkit.event.EventHandler;

public class PacketLogger extends Module{

    public PacketLogger() {
        super(Check.PACKET_LOGGER);
    }

    @EventHandler
    public void onPacketReceive(ReceivedPacketEvent event){
        if(!this.isEnabled())
            return;

        // Movement packets
        String[] whitelist = new String[]{
                "PacketPlayInFlying",
                "PacketPlayInPosition",
                "PacketPlayInPositionLook",
                "PacketPlayInLook"
        };

        for(String str : whitelist)
            if (event.getPacket().getClass().getSimpleName().equals(str))
                return;

        Main.logger.tick(event.getPlayer(), event.getPacket());
    }
}
