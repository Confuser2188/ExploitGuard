package io.github.confuser2188.packetlistener.minecraft;

import io.github.confuser2188.packetlistener.FieldName;
import io.github.confuser2188.packetlistener.Reflection;

public class PayloadChannel {

    public static String getChannel(Object packet) throws Exception{
        Object channelObject = Reflection.getFieldValue(packet, FieldName.PAYLOADCHANNEL.getName());

        String channel;
        if(channelObject instanceof String)
        {
            // For older versions
            channel = (String) channelObject;
        }
        else /* instance of MinecraftKey */
        {
            // For 1.13+
            channel = Reflection.getFieldValue(channelObject, "a") + ":" +  Reflection.getFieldValue(channelObject, "b");
        }
        return channel;
    }
}
